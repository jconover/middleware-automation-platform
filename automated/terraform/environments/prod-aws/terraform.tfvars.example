# =============================================================================
# Terraform Variables Example
# =============================================================================
# Copy this file to terraform.tfvars and customize for your environment.
# =============================================================================

# -----------------------------------------------------------------------------
# General
# -----------------------------------------------------------------------------
aws_region   = "us-east-1"
environment  = "production"
project_name = "middleware-platform"

# -----------------------------------------------------------------------------
# Networking
# -----------------------------------------------------------------------------
vpc_cidr           = "10.10.0.0/16"
availability_zones = 2

# -----------------------------------------------------------------------------
# Compute
# -----------------------------------------------------------------------------
liberty_instance_type  = "t3.small"   # 2 vCPU, 2GB RAM (~$15/month each)
liberty_instance_count = 2
ssh_public_key_path    = "~/.ssh/ansible_ed25519.pub"

# Optional: Allow SSH from specific CIDRs (for bastion access)
# allowed_ssh_cidr_blocks = ["203.0.113.0/24"]

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
db_instance_class          = "db.t3.micro"  # ~$15/month
db_name                    = "appdb"
db_username                = "appuser"
db_allocated_storage       = 20
db_backup_retention_period = 7

# -----------------------------------------------------------------------------
# Cache
# -----------------------------------------------------------------------------
cache_node_type = "cache.t3.micro"  # ~$12/month

# -----------------------------------------------------------------------------
# SSL/TLS Configuration
# -----------------------------------------------------------------------------
# Option 1: No HTTPS (development/testing)
create_certificate = false
domain_name        = ""
certificate_arn    = ""

# Option 2: Create new ACM certificate (requires DNS validation)
# create_certificate = true
# domain_name        = "app.example.com"

# Option 3: Use existing ACM certificate
# create_certificate = false
# certificate_arn    = "arn:aws:acm:us-east-1:123456789012:certificate/abc123"

# -----------------------------------------------------------------------------
# Management Server (AWX/Jenkins)
# -----------------------------------------------------------------------------
create_management_server = true
management_instance_type = "t3.medium"  # 2 vCPU, 4GB RAM (~$30/month)

# REQUIRED - SECURITY: Restrict management server access to specific IPs/CIDRs.
# This controls SSH (22), AWX (30080), Grafana (3000), and Prometheus (9090) access.
#
# IMPORTANT: You MUST replace the placeholder below with your actual IP or CIDR.
# The variable has no default and will fail validation if not set.
#
# Find your public IP:
#   curl -s ifconfig.me
#
# Examples:
#   Single IP (most secure):  ["203.0.113.50/32"]
#   Office network:           ["203.0.113.0/24"]
#   Multiple sources:         ["203.0.113.50/32", "10.0.0.0/8"]
#
# NOTE: 0.0.0.0/0 is explicitly blocked by validation for security reasons.
management_allowed_cidrs = ["REPLACE_WITH_YOUR_IP/32"]  # e.g., ["203.0.113.50/32"]

# -----------------------------------------------------------------------------
# Monitoring Server (Prometheus/Grafana)
# -----------------------------------------------------------------------------
create_monitoring_server = true
monitoring_instance_type = "t3.small"  # 2 vCPU, 2GB RAM (~$15/month)

# -----------------------------------------------------------------------------
# Additional Tags
# -----------------------------------------------------------------------------
additional_tags = {
  CostCenter = "middleware"
  Owner      = "platform-team"
}
